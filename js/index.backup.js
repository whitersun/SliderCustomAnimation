export const slideWrapperContainer = () => {
    const information = [{
        "name": "LINH KA",
        "job": "Singer",
        "class": "1",
        "position": "1",
        "jobItem": "",
        "img": "./assets/images/LinhKa2.jpg",
        "imgHeight": "./assets/images/LinhKa1.jpg",
        "quantity": "Over 50 milions",
        "social": "Views on Youtube",
        "describe_EN": "Defying audience skepticism, Linh Ka made her official debut in 2023 with her debut EP, \"Chu.\" Backed by a formidable team and driven by her own growth, this Gen Z star is poised to create an even bigger impact on her career.",
        "describe_VI": "Vượt qua sự hoài nghi của khán giả, Linh Ka đã chính thức debut vai trò ca sĩ chuyên nghiệp vào năm 2023 với EP đầu tay mang tên \"Chu\". Được hậu thuẫn bởi một đội ngũ mạnh mẽ để thúc đẩy sự phát triển của chính mình, ngôi sao thế hệ Z này chắc chắn sẽ còn tạo ra được nhiều thành tựu lớn nữa trong sự nghiệp của cô.",
        "fblink": "https://www.facebook.com/linhka2020",
        "instagram": "https://www.instagram.com/linggka109/?hl=vi",
        "ytblink": "https://www.youtube.com/c/linhkaofficial",
        "tiktok": "https://www.tiktok.com/@_linhhkaa_",
        "splink": "https://open.spotify.com/artist/6gXUsziOuoRCgmtm62Nrny?si=p8afG4-rQF21HbyGUfk5vg"
    }, {
        "name": "OSAD",
        "job": "Rapper",
        "class": "2",
        "position": "2",
        "jobItem": "",
        "img": "./assets/images/osad2.jpg",
        "imgHeight": "./assets/images/osad1.jpg",
        "quantity": "Over 30 million",
        "social": "Followers on Instagram",
        "describe_EN": "Meet OSAD, the young rapper with a musical palette that's fresh, lively, and undeniably catchy. He's captured the hearts of many fans through a string of chart-topping hits like \"Yeu Đương\", \"Nguoi Am Phu\", \"Loi Co Canh\", and \"Yeu Sac Yeu.\"",
        "describe_VI": "OSAD, anh chàng rapper trẻ với màu sắc âm nhạc tươi mới, sống động và lôi cuốn. Anh đã chinh phục trái tim của nhiều người hâm mộ thông qua một loạt các bản hits của mình như \"Yêu Đương,\" \"Người Âm Phủ,\" \"Lời Có Cánh,\" và \"Yêu Sắc Yếu.\"",
        "fblink": "https://www.facebook.com/osadofficial310/",
        "instagram": "https://www.instagram.com/myqnam",
        "ytblink": "https://www.youtube.com/OSAD%20Official",
        "tiktok": "https://www.tiktok.com/@osad.official",
        "splink": "https://open.spotify.com/artist/6sJBvMCAi9NuNCxI9RDYDW?si=y1z_XV7mTNqhz8u4WMwWQA"
    }, {
        "name": "MINA YOUNG ",
        "job": "Singer",
        "class": "3",
        "position": "3",
        "jobItem": "",
        "img": "./assets/images/MiNaYoong2.jpg",
        "imgHeight": "./assets/images/MiNaYoong1.jpg",
        "quantity": "Over 50 milions",
        "social": "Views on Youtube",
        "describe_EN": "Mina Young, a rising star who took her first steps as a streamer, officially made her debut as a singer in 2023 with her debut track \"Cung Trang\". What's not widely known is that she's also a music student at the Military University of Culture and Arts in Hanoi, adding depth to her artistry.",
        "describe_VI": "Bắt đầu sự nghiệp của mình với vai trò là streamer, Mina Young đã chính thức debut vào năm 2023 với single đầu tay mang tên \"Cung Trăng\". Điều ít người biết là cô cũng là một sinh viên ngành âm nhạc tại Trường Đại học Văn hóa Nghệ thuật Quân đội ở Hà Nội, nơi nuôi dưỡng năng khiếu nghệ thuật của cô.",
        "fblink": "https://www.facebook.com/imminayoung",
        "instagram": "https://www.instagram.com/imminayoung/",
        "ytblink": "https://www.youtube.com/channel/UCCPXhMYw-t-PEDifEwJPIyA",
        "tiktok": "https://www.tiktok.com/@imminayoung",
        "splink": "https://open.spotify.com/artist/204u7fdJOUtQk2tMppK8m0?si=e12y-oDXSkysHS9X6u11RA"
    }, {
        "name": "HAI DANG DOO",
        "job": "Singer",
        "class": "4",
        "position": "4",
        "jobItem": "Influencer",
        "img": "./assets/images/HaiDang2.jpg",
        "imgHeight": "./assets/images/HaiDang1.jpg",
        "quantity": "Over 50 milions",
        "social": "Views on Youtube",
        "describe_EN": "From TikTok sensation, boasting a following of over 2.6 million, to a potential Gen Z music icon, Hai Dang Doo possesses a magnetic stage presence and a voice that's nothing short of captivating.",
        "describe_VI": "Từ hiện tượng TikTok, với hơn 2,6 triệu người theo dõi, trở thành một biểu tượng âm nhạc thế hệ Z tiềm năng, Hải Đăng Doo sở hữu khả năng trình diễn trên sân khấu cực cuốn hút và một giọng ca ấn tượng.",
        "fblink": "https://www.facebook.com/babysharkdoodoodoohoohoo/",
        "instagram": "https://www.instagram.com/hidadoo/",
        "ytblink": "https://www.youtube.com/channel/UC9rDC1n0QWyFtczcbrRy3Dg",
        "tiktok": "https://www.tiktok.com/@haidang_doo?lang=vi-VN",
        "splink": "https://open.spotify.com/artist/0F1rSmrNT6sp3LYohgYKsT?si=oN9mC0LpR3ib8rQz30thCg"
    }, {
        "name": "MIINA ",
        "job": "Singer",
        "class": "5",
        "position": "5",
        "jobItem": "",
        "img": "./assets/images/MiiNa2.jpg",
        "imgHeight": "./assets/images/MiiNa1.jpg",
        "quantity": "Over 50 milions",
        "social": "Plays on SoundCloud",
        "describe_EN": "Get to know Miina, the newcomer in the Vietnamese music scene, skillfully guided by the entertainment powerhouse, DreamS Entertainment. With an image reminiscent of a KPop sensation, MIINA combines her endearing appearance with a voice brimming with potential. Her initial music releases have already left an indelible mark.",
        "describe_VI": "Miina là tân binh trong làng nhạc Việt, được quản lý bởi công ty giải trí DREAMeR Entertainment. Với hình ảnh theo đuổi phong cách ngọt ngào, nữ tính như các ngôi sao K-Pop, Miina còn sở hữu giọng ca đầy tiềm năng.",
        "fblink": "https://www.facebook.com/hi.im.miina/",
        "instagram": "https://www.instagram.com/miina_dreamer/",
        "tiktok": "https://www.tiktok.com/@hi.im.miina",
        "splink": "https://open.spotify.com/artist/76nos2JmvLyYGZ28ribrf7?si=cSJkedbXTXe42YiAcUcbMg"
    }, {
        "name": "NGO LAN HUONG",
        "job": "Singer",
        "class": "6",
        "position": "6",
        "jobItem": "Song Writer",
        "img": "./assets/images/NgoLanHuong2.jpg",
        "imgHeight": "./assets/images/NgoLanHuong1.jpg",
        "quantity": "Over 50 milions",
        "social": "Plays on SoundCloud",
        "describe_EN": "From The Voice Vietnam, Ngo Lan Huong has confidently stepped into her role as an artist, showcasing her talents as both a songwriter and a remarkable singer. Her recent hit, \"Yeu Dung So Dau\", is just one example of her musical prowess. Embracing a path of her own, she's leaving behind her cover artist days and venturing into a unique musical journey.",
        "describe_VI": "Bước ra từ The Voice Vietnam, Ngô Lan Hương đã tự tin bước vào làng nhạc Việt với vai trò là một nghệ sĩ với khả năng hát và sáng tác ấn tượng.Bản hit gần đây của cô, \"Yêu Đừng Sợ Đau,\" chỉ là một ví dụ về tài năng âm nhạc của cô. Bước vào một con đường riêng của mình, cô đang rũ bỏ đi hình tượng ca sĩ cover và mạo hiểm thể hiện bản thân trên hành trình âm nhạc đầy hứa hẹn.",
        "fblink": "https://www.facebook.com/ngolanhuongofficial/?locale=vi_VN",
        "instagram": "https://www.instagram.com/ngolanhuong04/",
        "ytblink": "https://www.youtube.com/channel/UC6wjclMOHQJwOHrvqVRi5Jw",
        "tiktok": "https://www.tiktok.com/@ngolanhuong04",
        "splink": "https://open.spotify.com/artist/3y0Tmt0epaxAHy6L89dGGC?si=WRRDvD9AT5-NeVmxFJQ_vw"
    }, {
        "name": "$A MILO",
        "job": "Rapper",
        "class": "7",
        "position": "7",
        "jobItem": "",
        "img": "./assets/images/amilo2.jpg",
        "imgHeight": "./assets/images/amilo1.jpg",
        "quantity": "Over 50 milions",
        "social": "Plays on SoundCloud",
        "describe_EN": "Meet $A Milo, a gifted protege of the celebrated rapper BinZ. With impeccable rap skills and a profound lyrical insight, his music delves deep into meaningful messages and life lessons he aims to convey.",
        "describe_VI": "$A Milo là học trò của nam rapper tài năng BinZ. Với kỹ năng rap xuất sắc và cái nhìn sâu sắc trong mỗi lời bài hát, âm nhạc của anh đem tới những thông điệp có ý nghĩa và những bài học cuộc sống mà anh mong muốn truyền tải qua đó.",
        "fblink": "https://www.facebook.com/samilo.444/",
        "ytblink": "https://www.youtube.com/@samiloofficial111",
        "splink": "https://open.spotify.com/artist/55YrB6LSt3ZShzAiBXTEcA?si=oDDmITTHS7Kfop6ai0yyPA"
    }];

    let resizeTimer;
    let prevSlide = 0;
    let lang = localStorage.getItem('selectedLang').toLowerCase() || 'EN'.toLowerCase();

    const elements = $('.slideWrapperContainer');
    const layoutStart = elements.find('.layoutStart');
    const layoutEnd   = elements.find('.layoutEnd');
    const layoutMobile = elements.find('.image-slider');


    const slideStart = layoutStart.find('.slideWrapper');
    const slideEnd = layoutEnd.find('.slideWrapper');
    const defaultTranslateXValues = ['-100', '0', '14'];

    
    isDomReady(function() {
        updateTheLanguageJson();

        window.innerWidth > 768 ? desktopSlideWrapper() : mobileSlideWrapper();
    
        window.addEventListener('resize', function() {
            debounce(function () {
                if (window.innerWidth > 768) {
                    desktopSlideWrapper();
                } else {
                    mobileSlideWrapper();
                }
            }, 250);
        });
    });

    function isDomReady(fn) {
        return document.readyState === 'interactive' || document.readyState === 'complete'
            ? setTimeout(fn, 1)
            : document.addEventListener('DOMContentLoaded', fn);
    } 

    function updateTheLanguageJson () {
        const getLanguageObject = localStorage.getItem('translationsData') || null;

        if (getLanguageObject === null) return;

        const descriptionConver = information.reduce((result, item, index) => {
            const { describe_EN, describe_VI } = item;
        
            result.EN = { 
                ...result.EN, // Preserve existing EN properties 
                ["slideWrapperContainer_content_" + (index + 1)]: describe_EN 
            };
            result.VI = { 
                ...result.VI, // Preserve existing VI properties
                ["slideWrapperContainer_content_" + (index + 1)]: describe_VI 
            };
        
            return result;
        }, { EN: {}, VI: {} }); // Initialize the result object 
        
        const convertToJsonLanguage = getLanguageObject ? JSON.parse(getLanguageObject) : null;
        const combinedEn = {...convertToJsonLanguage.EN, ...descriptionConver.EN};
        const combinedVi = {...convertToJsonLanguage.VI, ...descriptionConver.VI};

        const combinedLanguage = { ...convertToJsonLanguage, EN: combinedEn, VI: combinedVi };

        localStorage.setItem('translationsData', JSON.stringify(combinedLanguage));
    }

    function desktopSlideWrapper () {
        generateHTML();
        LazyLoadingImage();
    
        executeClickToChangeNextSlide();
        
        function generateHTML() {
            const generateSlideItem = (index, item) => {
                return `
                    <div class="slide-item skeleton" data-class="${item.class}" data-slide="${index}" style="opacity: 1;">
                        <div class="dp-content">
                            <div class="contentBox">
                                <div class="job">
                                    <div class="jobItem">${item.job}</div>
                                    ${item.jobItem ? `<div class="jobItem">${item.jobItem}</div>` : ''}
                                </div>
                                <div class="name">
                                    <span class="artistName">${item.name}</span>
                                    
                                    <button class="btn btnSeeMore">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v14m-7-7h14"/></svg>
                                    </button>
                                </div>
                                
                                <div class="divider"></div>
                                <div class="describe">
                                    <p class="content" data-translate-key="slideWrapperContainer_content_${index + 1}">${lang.toLowerCase() === 'EN'.toLowerCase() ? item.describe_EN : item.describe_VI}</p>
                                </div>
                            </div>
        
                            <div class="icon">
                                ${item.fblink ? `<a href=${item.fblink} target="_blank"><img decoding="async" loading="lazy" class="img-fluid"" src="./assets/icons/facebook.svg" alt="facebook" /></a>` : ''}
                                ${item.instagram ? `<a href=${item.instagram} target="_blank"><img decoding="async" loading="lazy" class="img-fluid"" src="./assets/icons/instagram.svg" alt="spotify" /></a>` : ''}
                                ${item.ytblink ? `<a href=${item.ytblink} target="_blank"><img decoding="async" loading="lazy" class="img-fluid"" src="./assets/icons/youtube.svg" alt="youtube" /></a>` : ''}
                                ${item.tiktok ? `<a href=${item.tiktok} target="_blank"><img decoding="async" loading="lazy" class="img-fluid"" src="./assets/icons/tiktok.svg" alt="spotify" /></a>` : ''}
                                ${item.splink ? `<a href=${item.splink} target="_blank"><img decoding="async" loading="lazy" class="img-fluid"" src="./assets/icons/spotify.svg" alt="spotify" /></a>` : '' }
                            </div>
                        </div>
                        <div class="dp-img">
                            <img
                                width="900"
                                height="645"
                                decoding="async"
                                loading="lazy"
                                class="img-fluid" src="${item.img}"
                                alt="${item.name}"
                            />
                        </div>
                    </div>
                `
            }
            
            const generateSlideItemEnd = (index, item) => {
                const zIndex = `z-index: ${information.length - index}`;
                const translateXValues = defaultTranslateXValues; // Add more values if needed
                const scaleValues = ['0.8', '1', '0.95', '0.9', '0.85']; // Add more values if needed
                const translateX = index < translateXValues.length ? translateXValues[index] : index * 9;
                const scale = index < scaleValues.length ? scaleValues[index] : '0.8';
                const transform = `transform: translateX(${translateX}%) scale(${scale})`;
                
                const style = `${zIndex}; ${transform}`;
        
                return `
                    <div class="slide-item ${index > 0 && index <= 5 ? 'active' : ''}" data-slide="${index}"
                    style="${style}">
                        <div class="view skeleton">
                            <img 
                                width="900"
                                height="645"
                                decoding="async"
                                loading="lazy"
                                class="img-fluid"
                                src="${item.imgHeight}"
                                alt="${item.name}"
                            />
                        </div>
                    </div>
                `
            }
            
            information.forEach(function (item, index) {
                slideStart.append(generateSlideItem(index, item));
                slideEnd.append(generateSlideItemEnd(index, item));
        
                slideStart.find('.slide-item').each(function (item, index) {
                    const heightOfDescription = $(this).find('.describe .content').height();
                
                    $(this).find('.contentBox').css('--height-of-description', `${heightOfDescription + 20}px`);
                });
        
                slideEnd.find('.slide-item').each(function (item, index) {
                    const imagesCache = $(this).find('.view img');
                    imagesCache.css('opacity', '0');
                });
            });
        
            return {
                slideStart: slideStart[0],
                slideEnd: slideEnd[0]
            }
        };
        
        // TODO: Lazy load images
        async function LazyLoadingImage () {
            function loadImage(src) {
                return new Promise((resolve, reject) => {
                    const image = new Image();
                    image.src = src;
            
                    image.onload = () => {
                        resolve(image);
                    };
            
                    image.onerror = () => {
                        reject(new Error("Failed to load image"));
                    };
                });
            }
        
            // Usage example:
            const imagePromises = slideStart.find('.slide-item').map(function (index, item) {
                const $this = $(this);
                const imagesCache = $(this).find('.dp-img img');
        
                return loadImage(imagesCache.attr('src'))
                    .then((image) => {
                        console.log("Image loaded successfully");
                        // Do something with the loaded image
                        $this.removeClass('.skeleton').css({ background: 'transparent', opacity: '' });
                    })
                    .catch((error) => {
                        console.error(error);
                        // Handle error condition
                    });
            })
        
            return Promise.all(imagePromises).then(() => {
                console.log("All images loaded successfully");
                // Run your final action here after all images are loaded
        
                $('.skeleton').removeClass('skeleton');
        
                slideEnd.find('.slide-item').each(function (item, index) {
                    const imagesCache = $(this).find('.view img');
                    imagesCache.css('opacity', '1');
                });
        
                slideStart.find('.slide-item[data-slide="0"]').addClass('active canHover');
            
                return {
                    slideStart: slideStart[0],
                    slideEnd: slideEnd[0]
                }
            }).catch((error) => {
                console.error("Error loading images:", error);
                // Handle error condition
        
                return error.message
            });
        }
        
        let increasedIndex = 0;
        function ClickToChangeNextSlide(event) {
            event.preventDefault();
        
            const prevSlide = slideStart.find(`.slide-item[data-slide="${increasedIndex}"]`);
            // prevSlide.css('position', 'absolute');
            prevSlide.css({'position': 'absolute', 'pointer-events': 'none'});
        
            increasedIndex = (increasedIndex + 1) % information.length;
            console.log('increasedIndex: ', increasedIndex);
        
            const slideEndItems = slideEnd.find('.slide-item');
        
            const slideConditionalArray = [];
            slideEndItems.each(function(index, item) {
                slideEndItems.eq(increasedIndex).removeClass('active');
                
                let conditional = (index + increasedIndex) % slideEndItems.length;
        
                slideConditionalArray.push(conditional);
        
                const zIndex = `z-index: ${slideEndItems.length - index}`;
                const translateXValues = defaultTranslateXValues; // Add more values if needed
                const translateX = index < translateXValues.length ? translateXValues[index] : index * 9;
        
                const scaleValues = ['0.999', '1', '0.95', '0.89', '0.85']; // Add more values if needed
                const scale = index < scaleValues.length ? scaleValues[index] : '0.8';
                const transform = `transform: translateX(${translateX}%) scale(${scale})`;
        
                const style = `${zIndex}; ${transform}`;
        
                slideEnd.find(`.slide-item[data-slide="${conditional}"]`).attr('style', style); 
            });
        
            console.log('slideConditionalArray: ', slideConditionalArray);
            const slideConditionalArrayLength = slideConditionalArray.length;
            
            function slideEndRemoveItems (conditional) {
                slideEndItems.filter(`[data-slide="${conditional}"]`).removeClass('active');
            }
        
            function slideEndAddItems (conditional) {
                return slideEndItems.filter(`[data-slide="${conditional}"]`).addClass('active')
            }
        
            slideEndItems.find(`[data-slide="${slideConditionalArray[0]}"]`).removeClass('active');
            if (slideConditionalArrayLength > 5) {
                const slideConditional = slideConditionalArray.slice(1, 5);
                const slideConditionalTail = slideConditionalArray.slice(5);
        
                slideConditionalTail.forEach((conditional) => slideEndRemoveItems(conditional));
                slideConditional.forEach((conditional) => slideEndAddItems([conditional]));
            } else {
                for (let i = 0; i < slideConditionalArrayLength; i++) {
                    const conditional = slideConditionalArray[i];
        
                    if (conditional === increasedIndex) {
                        slideEndRemoveItems(conditional);
                    }
        
                    if (i === 0) continue;
                    slideEndAddItems([conditional]);
                }
            }
        
            
        
            const nextSlide = slideStart.find(`.slide-item[data-slide="${increasedIndex}"]`);
            // nextSlide.addClass('active').animate({ position: 'relative', 'z-index': '1' }, function() {
            nextSlide
                .addClass('active')
                .css('pointer-events', 'auto')
                .animate({ 
                    position: 'relative', 
                    'z-index': '1' 
                },  function() {
                    const $this = $(this);
        
                    // const classItem = $this.attr('data-class');
                    // const description = $this.find('.contentBox .describe .content');
                    // const infoOfClass = info.find((obj) => obj.class === classItem);
                    // const english = infoOfClass.describe_EN;
                    // const vietnamese = infoOfClass.describe_VI;
        
                    // if (lang === 'EN'.toLowerCase()) description.text(english)
                    // else description.text(vietnamese)
        
                    slideStart.find('.slide-item').each(function () {
                        const heightOfDescription = $(this).find('.describe .content').height();
                    
                        $(this).find('.contentBox').css('--height-of-description', `${heightOfDescription + 20}px`);
                    });
        
        
                    // prevSlide.css('z-index', '0');
                    prevSlide.css({'z-index': '0'});
                    
                    setTimeout(() => {
                        prevSlide.removeClass('active canHover');
                        if(window,innerWidth <= 768)
                            $(".slide-item").on("click", ClickToChangeNextSlide);
                        else {
                            slideStart.find(".slide-item").off("click", ClickToChangeNextSlide);
                            slideEnd.find(".slide-item").on("click", ClickToChangeNextSlide);
                        }
                        afterIconRunAnimation($this.find('.icon'));
        
                    }, 250
                );
            });
        
            $(".slide-item").off("click", ClickToChangeNextSlide);
        }
        
        function afterIconRunAnimation(element) {
            element.on('animationend', function() {
                $(this).parents('.slide-item').addClass('canHover');
                element.off('animationend');
            });
        }
        
        function executeClickToChangeNextSlide() {
            $(".slide-item").off("click", ClickToChangeNextSlide);
        
            debounce(function() {
                if(window.innerWidth <= 768) {
                    $(".slide-item").on("click", ClickToChangeNextSlide);
                }
                else {
                    slideStart.find(".slide-item").off("click", ClickToChangeNextSlide);
                    slideEnd.find(".slide-item").on("click", ClickToChangeNextSlide);
                }
            },250)
        }
    }

    function mobileSlideWrapper () {
        if (layoutMobile.children().length > 0) {
            return;
        }
        
        generateHTML();

        function generateHTML() {
            const generateSlideItem = (index, item) => {
                return `
                <div class="image-item" data-class="${item.class}">
                    <div class="containerWrapper">
                        <img  width="900" height="645" decoding="async" loading="lazy" class="img-fluid" src="${item.imgHeight}" alt="" />
                    </div>
                    <div class="image-content">
                        <div class="contentBox">                
                            <div class="image-job">
                                <div class="image-jobItem">${item.job}</div>
                                ${item.jobItem ? `<div class="image-jobItem">${item.jobItem}</div>` : ''}
                            </div>
                            <div class="name">
                                <span class="artistName">${item.name}</span>
                                <button class="btn btnSeeMore">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v14m-7-7h14"/></svg>
                                </button>
                            </div>
        
                            <div class="divider"></div>
                            <div class="describe">
                                <p class="content" data-translate-key="slideWrapperContainer_content_${index + 1}">${
                                    // default will be english
                                    lang.toLowerCase() === ('EN').toLowerCase() ? item.describe_EN  : item.describe_VI
                                }</p>
                            </div>
                        </div>
                        
                        <div class="icon">
                                ${item.fblink ? `<a href=${item.fblink} target="_blank"><img decoding="async" loading="lazy" class="img-fluid"" src="./assets/icons/facebook.svg" alt="facebook" /></a>` : ''}
                                ${item.instagram ? `<a href=${item.instagram} target="_blank"><img decoding="async" loading="lazy" class="img-fluid"" src="./assets/icons/instagram.svg" alt="spotify" /></a>` : ''}
                                ${item.ytblink ? `<a href=${item.ytblink} target="_blank"><img decoding="async" loading="lazy" class="img-fluid"" src="./assets/icons/youtube.svg" alt="youtube" /></a>` : ''}
                                ${item.tiktok ? `<a href=${item.tiktok} target="_blank"><img decoding="async" loading="lazy" class="img-fluid"" src="./assets/icons/tiktok.svg" alt="spotify" /></a>` : ''}
                                ${item.splink ? `<a href=${item.splink} target="_blank"><img decoding="async" loading="lazy" class="img-fluid"" src="./assets/icons/spotify.svg" alt="spotify" /></a>` : '' }
                            </div>
                    </div>
                </div>
                `
            }
        
            information.forEach(function (item, index) {
                layoutMobile.append(generateSlideItem(index, item));
            });
        
            layoutMobile.find('.btnSeeMore').on('click', function () {
                const $this = $(this);
        
                $this.parents('.image-item').toggleClass('active');
        
                const contentBox = $this.parents('.contentBox').find('.describe .content')
                const currentContentHeight = contentBox.height();
        
                if (!$this.parents('.image-item').hasClass('active')) {
                    contentBox.parent().css({'max-height': '0', 'top': '0',  'opacity': '0'});
                } else {
                    contentBox.parent().css({'max-height': `${currentContentHeight}px`, 'top': '0', 'opacity': '1'});
                }
            });
        }
        
        const slickObj = $('.slideWrapperContainer .image-slider').slick({
            // dots: true,
            // infinite: true,
            slidesToShow: 3,
            speed: 300,
            // autoplay: true,
            // autoplaySpeed: 3000,
            centerMode: true,
            centerPadding: '30px',
            responsive: [
            {
                breakpoint: 980, // tablet breakpoint
                settings: {
                    slidesToShow: 3,
                    slidesToScroll: 1
                }
            },
            {
                breakpoint: 680, // tablet breakpoint
                settings: {
                    slidesToShow: 2,
                    slidesToScroll: 1
                }
            },
            {
                breakpoint: 480, // mobile breakpoint
                settings: {
                    slidesToShow: 1,
                    slidesToScroll: 1
                }
            }
        ]
        });
        
        window.addEventListener('resize', function () {
            return debounce(function () {
        
                const allActive = layoutMobile.find('.image-item.active');
                const allActiveContent = allActive.find('.describe');
        
                // remove active
                if (this.innerWidth >= 768) {
                    allActive.removeClass('active');
                    allActiveContent.css({'max-height': '0', 'top': '0',  'opacity': '0'});
                }
            }, 250);
        })
        
        slickObj.on('beforeChange', function (event, slick, currentSlide, nextSlide) {
            prevSlide = currentSlide;
            return prevSlide;
        });
        
        slickObj.on('afterChange', function (event, slick, currentSlide, nextSlide) {
            const $this = $(this);
        
            if (currentSlide === prevSlide) {
                return;
            }
        
            const getAllHaveActive = $this.find('.image-item.active');
            const lastSlide = $this.find(`.image-item[data-slick-index="${prevSlide}"]`);
        
            const activeSlick = $this.find(`.image-item[data-slick-index="${currentSlide}"]`);
            const contentBox = lastSlide.find('.describe .content');
        
            lastSlide.removeClass('active'); 
        
            getAllHaveActive.each(function (index, item) {
                // TODO: remove Active
        
                const $$this = $(this);
                $$this.removeClass('active');
                $$this.find('.describe').animate({'max-height': '0', 'top': '0',  'opacity': '0'}, 'fast');
            });
        });
    }
    
    function debounce(func, delay) {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(func, delay);
    }

    return {
        jQueryElement: elements,
        elements: elements[0],
        language: lang
    }
}

slideWrapperContainer();